# Filename:     .shrc
# Authors:      Vincent Demeester
# License:      This file is licensed under the GPL v2.
# --------------------------------------------------------------------------- #
# This file is sourced only for interactive shells. This is the common rc files
# that should work with any posix compliant shell.
# --------------------------------------------------------------------------- #

# Allow disabling of entire environment suite
test -n "$INHERIT_ENV" && return 0
test -n "$shrc_loaded" && return 0

sh_load_status .shrc

# Load shrc hooks (if present)
. $ZDOT_RUN_HOOKS .sh/hook/shrc.pre

# {{{ HOME -------------------------------------------------------------------

# Don't leave history files in /
: ${HOME:=/}
if [ "$HOME" = '/' ]; then
  if [ -d /root ]; then
    HOME=/root
  elif [ -d /var/tmp ]; then
    new_home=/var/tmp/root.tmphome
    if [ -d "$new_home" ] || mkdir "$new_home"; then
      HOME="$new_home"
    fi
  fi
fi
[ "$HOME" = '/' ] && echo "Warning: ~ is /"

# }}}
# {{{ PAGER ------------------------------------------------------------------
export PAGER='less'
export LESS='-a -h100 -i -j15 -M -q -R -W -y100 -X'
# }}}
# {{{ ALIAS ------------------------------------------------------------------
# {{{ ssh
ssh_command=ssh
command -v ssh_wrapper >/dev/null && {
    ssh_command=ssh_wrapper
}
alias ssh=$ssh_command
# }}}
# {{{ tree
alias tre='tree -C'
# }}}
# {{{ ls aliases
if ls -F --color / >&/dev/null; then
    LS_OPTS='-F --color'
elif ls -F / >&/dev/null; then
    LS_OPTS='-F'
elif ls --color / >&/dev/null; then
    LS_OPTS='--color'
fi
# jeez I'm lazy ...
for opts in {,a}{,r}{,t}{,L}{,S}; do
    eval "alias l$opts='ls -lh$opts $LS_OPTS'"
    eval "alias ll$opts='ls -l$opts $LS_OPTS'"
    eval "alias ls$opts='ls ${opts:+-$opts} $LS_OPTS'"
done
alias ld='ls -ldh'
alias sl=ls # often screw this up
# }}}
# }}}
# Load shrc hooks (if present)
. $ZDOT_RUN_HOOKS .sh/hook/shrc.post

shrc_loaded=y
# vim:filetype=sh foldmethod=marker autoindent expandtab shiftwidth=4

